<!doctype html><html lang=en><head><title>Manage terraform with tfenv :: Maksym Postument</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="First article in series about terraform. In this article i will show how to manager terraform with tfenv and how to configure VSCode for work with terraform"><meta name=keywords content="VSCode,Devops,Terraform,tfenv,HashiCorp,Beginner"><meta name=robots content="noodp"><link rel=canonical href=https://mpostument.com/2022/07/26/terraform-install/><script async src="https://www.googletagmanager.com/gtag/js?id=G-SBRJXS94DC"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SBRJXS94DC",{anonymize_ip:!1})}</script><link rel=stylesheet href=https://mpostument.com/assets/style.css><link rel=stylesheet href=https://mpostument.com/assets/blue.css><link rel=apple-touch-icon href=https://mpostument.com/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://mpostument.com/img/favicon/blue.png><meta name=twitter:card content="summary"><meta name=twitter:site content="mpostument.com"><meta name=twitter:creator content="Maks_Postument"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Manage terraform with tfenv"><meta property="og:description" content="First article in series about terraform. In this article i will show how to manager terraform with tfenv and how to configure VSCode for work with terraform"><meta property="og:url" content="https://mpostument.com/2022/07/26/terraform-install/"><meta property="og:site_name" content="Maksym Postument"><meta property="og:image" content="https://i.imgur.com/yJHY7Ea.jpg"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:section" content="Devops"><meta property="article:section" content="Terraform"><meta property="article:section" content="Beginner"><meta property="article:published_time" content="2022-07-26 20:54:23 +0300 +0300"><p align=center style=background-color:#23b0ff>Sign up for my <a href=https://tinyletter.com/mpostument>email newsletter</a> or use this <a href=/index.xml>RSS feed</a> to get notified of new blog posts.</p></head><body class=blue><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>mpostument.com</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>Home</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li><li><a href=/projects/>Projects</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>English ▾</li></ul><ul class="language-selector__more hidden"><li><a href=https://mpostument.com/>English</a></li><li><a href=https://mpostument.com/ua/>Ukraine</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>Home</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li><li><a href=/projects/>Projects</a></li><hr><li><a href=https://mpostument.com/>English</a></li><li><a href=https://mpostument.com/ua/>Ukraine</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://mpostument.com/2022/07/26/terraform-install/>Manage terraform with tfenv</a></h1><div class=post-meta><span class=post-date>2022-07-26</span>
<span class=post-author>:: Maksym Postument</span>
<span class=post-reading-time>:: 4 min read (786 words)</span></div><span class=post-tags>#<a href=https://mpostument.com/tags/vscode/>VSCode</a>&nbsp;
#<a href=https://mpostument.com/tags/devops/>Devops</a>&nbsp;
#<a href=https://mpostument.com/tags/terraform/>Terraform</a>&nbsp;
#<a href=https://mpostument.com/tags/tfenv/>tfenv</a>&nbsp;
#<a href=https://mpostument.com/tags/hashicorp/>HashiCorp</a>&nbsp;
#<a href=https://mpostument.com/tags/beginner/>Beginner</a>&nbsp;</span>
<img src=https://i.imgur.com/yJHY7Ea.jpg class=post-cover alt="Manage terraform with tfenv" title="Cover Image"><div class=post-content><div><p>Hello!</p><p>This is the first article in a series of articles about terraform. In it, we will learn how to install terraform using tfenv and how to configure vscode to work with terraform.</p><h2 id=tfenv>tfenv<a href=#tfenv class=hanchor arialabel=Anchor>&#8983;</a></h2><p>You will need tfenv to get started. It makes it very easy to install and manage different versions of terraform.
The tfenv code is located at <a href=https://github.com/tfutils/tfenv>github</a>.</p><p>To install, you need to clone git repository</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone --depth<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span> https://github.com/tfutils/tfenv.git ~/.tfenv
</span></span></code></pre></div><p>Now if I call the <code>tfenv</code> command I will get an error. To make <code>tfenv</code> work, you need to add <code>tfenv</code> to the PATH or execute the command <code>ln -s ~/.tfenv/bin/* /usr/local/bin</code>. And now if I call <code>tfenv</code> I will see the result</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tfenv
</span></span><span style=display:flex><span>tfenv 2.2.2-158-gc05c364
</span></span><span style=display:flex><span>Usage: tfenv &lt;command&gt; <span style=color:#f92672>[</span>&lt;options&gt;<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Commands:
</span></span><span style=display:flex><span>   install       Install a specific version of Terraform
</span></span><span style=display:flex><span>   use           Switch a version to use
</span></span><span style=display:flex><span>   uninstall     Uninstall a specific version of Terraform
</span></span><span style=display:flex><span>   list          List all installed versions
</span></span><span style=display:flex><span>   list-remote   List all installable versions
</span></span><span style=display:flex><span>   version-name  Print current version
</span></span><span style=display:flex><span>   init          Update environment to use tfenv correctly.
</span></span><span style=display:flex><span>   pin           Write the current active version to ./.terraform-version
</span></span></code></pre></div><p>Finally <code>tfenv</code> is ready to use. In order to install <code>terraform</code>, you can call the <code>tfenv install</code> command, which download the latest available version of <code>terraform</code>. To install a specific version, you need to call the command <code>tfenv install 0.13.2</code>, and terraform version <code>0.13.2</code> will be installed.</p><p>To see the list of versions available for installation, you need to execute the <code>tfenv list-remote</code> command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tfenv list-remote
</span></span><span style=display:flex><span>1.3.0-alpha20220706
</span></span><span style=display:flex><span>1.3.0-alpha20220622
</span></span><span style=display:flex><span>1.3.0-alpha20220608
</span></span><span style=display:flex><span>1.2.5
</span></span><span style=display:flex><span>1.2.4
</span></span><span style=display:flex><span>1.2.3
</span></span><span style=display:flex><span>1.2.2
</span></span><span style=display:flex><span>1.2.1
</span></span><span style=display:flex><span>1.2.0
</span></span><span style=display:flex><span>1.2.0-rc2
</span></span><span style=display:flex><span>1.2.0-rc1
</span></span><span style=display:flex><span>1.2.0-beta1
</span></span><span style=display:flex><span>1.2.0-alpha20220413
</span></span><span style=display:flex><span>1.2.0-alpha
</span></span><span style=display:flex><span>1.1.9
</span></span><span style=display:flex><span>1.1.8
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>You can also check the versions that are already installed using <code>tfenv list</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tfenv list
</span></span><span style=display:flex><span>  1.2.4
</span></span><span style=display:flex><span>  1.1.9
</span></span><span style=display:flex><span>  1.1.6
</span></span><span style=display:flex><span>  1.0.11
</span></span><span style=display:flex><span>  1.0.5
</span></span><span style=display:flex><span>  1.0.1
</span></span><span style=display:flex><span>  1.0.0
</span></span><span style=display:flex><span>  0.14.11
</span></span><span style=display:flex><span>  0.14.10784023458628
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>And to specify which version of terraform to use, you need to execute the command <span style=color:#e6db74>`</span>tfenv use VERSION<span style=color:#e6db74>`</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>```</span>shell
</span></span><span style=display:flex><span>$ tfenv use 0.14.6
</span></span><span style=display:flex><span>Switching default version to v0.14.6
</span></span><span style=display:flex><span>Switching completed
</span></span><span style=display:flex><span>$ terraform version
</span></span><span style=display:flex><span>Terraform v0.14.6
</span></span><span style=display:flex><span>Your version of Terraform is out of date! The latest version
</span></span><span style=display:flex><span>is 1.2.5. You can update by downloading from https://www.terraform.io/downloads.html
</span></span></code></pre></div><p>Make sure terraform version is already installed</p><p>In addition, <code>tfenv</code> supports the <code>.terraform-version</code> file. In this file, you can specify the version of <code>terraform</code> and <code>tfenv</code> will automatically download and start using the correct version of <code>terraform</code>. For example, I will create a file <code>.terraform-version</code> with the content <code>1.1.1</code> and in the same directory I execute the command <code>tfenv use</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tfenv use
</span></span><span style=display:flex><span>No installed versions of terraform matched <span style=color:#e6db74>&#39;1.1.1:^1.1.1$&#39;</span>. Trying to install a matching version since TFENV_AUTO_INSTALL<span style=color:#f92672>=</span>true
</span></span><span style=display:flex><span>Installing Terraform v1.1.1
</span></span><span style=display:flex><span>Downloading release tarball from https://releases.hashicorp.com/terraform/1.1.1/terraform_1.1.1_linux_amd64.zip
</span></span><span style=display:flex><span><span style=color:#75715e>################################################################################################################################################ 100,0%</span>
</span></span><span style=display:flex><span>Downloading SHA hash file from https://releases.hashicorp.com/terraform/1.1.1/terraform_1.1.1_SHA256SUMS
</span></span><span style=display:flex><span>Not instructed to use Local PGP <span style=color:#f92672>(</span>/home/maksym/.tfenv/use-<span style=color:#f92672>{</span>gpgv,gnupg<span style=color:#f92672>})</span> &amp; No keybase install found, skipping OpenPGP signature verification
</span></span><span style=display:flex><span>Archive:  /tmp/tfenv_download.xtUx15/terraform_1.1.1_linux_amd64.zip
</span></span><span style=display:flex><span>  inflating: /home/maksym/.tfenv/versions/1.1.1/terraform  
</span></span><span style=display:flex><span>Installation of terraform v1.1.1 successful. To make this your default version, run <span style=color:#e6db74>&#39;tfenv use 1.1.1&#39;</span>
</span></span><span style=display:flex><span>Switching default version to v1.1.1
</span></span><span style=display:flex><span>Default version file overridden by /tmp/.terraform-version, changing the default version has no effect
</span></span><span style=display:flex><span>Default version <span style=color:#f92672>(</span>when not overridden by .terraform-version or TFENV_TERRAFORM_VERSION<span style=color:#f92672>)</span> is now: 1.1.1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ Terraform v1.1.1
</span></span><span style=display:flex><span>on linux_amd64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your version of Terraform is out of date! The latest version
</span></span><span style=display:flex><span>is 1.2.5. You can update by downloading from https://www.terraform.io/downloads.html
</span></span></code></pre></div><p>Although it is not necessary to call <code>tfenv use</code>. I will change the version of <code>terraform</code> in <code>.terraform-version</code> to <code>1.1.2</code> and execute <code>terraform</code>. And version will be automatically installed and selected for use</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ terraform version
</span></span><span style=display:flex><span>version <span style=color:#e6db74>&#39;1.1.2&#39;</span> is not installed <span style=color:#f92672>(</span>set by /tmp/.terraform-version<span style=color:#f92672>)</span>. Installing now as TFENV_AUTO_INSTALL<span style=color:#f92672>==</span>true
</span></span><span style=display:flex><span>Installing Terraform v1.1.2
</span></span><span style=display:flex><span>Downloading release tarball from https://releases.hashicorp.com/terraform/1.1.2/terraform_1.1.2_linux_amd64.zip
</span></span><span style=display:flex><span><span style=color:#75715e>################################################################################################################################################ 100,0%</span>
</span></span><span style=display:flex><span>Downloading SHA hash file from https://releases.hashicorp.com/terraform/1.1.2/terraform_1.1.2_SHA256SUMS
</span></span><span style=display:flex><span>Not instructed to use Local PGP <span style=color:#f92672>(</span>/home/maksym/.tfenv/use-<span style=color:#f92672>{</span>gpgv,gnupg<span style=color:#f92672>})</span> &amp; No keybase install found, skipping OpenPGP signature verification
</span></span><span style=display:flex><span>Archive:  /tmp/tfenv_download.6MKarM/terraform_1.1.2_linux_amd64.zip
</span></span><span style=display:flex><span>  inflating: /home/maksym/.tfenv/versions/1.1.2/terraform  
</span></span><span style=display:flex><span>Installation of terraform v1.1.2 successful. To make this your default version, run <span style=color:#e6db74>&#39;tfenv use 1.1.2&#39;</span>
</span></span><span style=display:flex><span>Terraform v1.1.2
</span></span><span style=display:flex><span>on linux_amd64
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your version of Terraform is out of date! The latest version
</span></span><span style=display:flex><span>is 1.2.5. You can update by downloading from https://www.terraform.io/downloads.html
</span></span></code></pre></div><p>With <code>.terraform-version</code> it is very easy to control which version of <code>terraform</code> is used in different projects.</p><h2 id=vscode>VSCode<a href=#vscode class=hanchor arialabel=Anchor>&#8983;</a></h2><p>To make easier to write <code>terraform</code> code, I use the <a href=https://code.visualstudio.com/Download>Visual Studio Code</a>. After the vscode is installed, you need to install <code>HashiCorp Terraform</code> extension for it. To install the extension, you need to press Ctrl+Shift+X or click on <img src=https://i.imgur.com/LBbwNV2.png alt=extension> and enter <code>terraform</code> in the search, select <code>HashiCorp Terraform</code> and click <code>Install</code></p><p><img src=https://i.imgur.com/BkCOuIO.png alt=tf></p><p><code>terraform</code> has a command called <code>terraform fmt</code> and it formats <code>terraform</code> code. This process can be automated using vscode. To do this, you need to press Ctrl+Shift+P and in the panel that appear, type <code>>Open Settings (Json)</code> and select the corresponding item in the menu and add <code>editor.formatOnSave: true</code> in the right window that opens</p><p><img src=https://i.imgur.com/334BSgG.png alt=settings></p><p>Now every time a file is saved, <code>terraform fmt</code> will automatically be called for that file.</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://mpostument.com/2022/03/22/docker-sdk-part-one/><span class=button__text>Docker Sdk Part One</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//mpostument-com.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://mpostument.com/assets/main.js></script>
<script src=https://mpostument.com/assets/prism.js></script>
<script src=https://mpostument.com/assets/languageSelector.js></script></div></body></html>