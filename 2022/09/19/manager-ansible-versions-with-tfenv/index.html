<!doctype html><html lang=en><head><title>Manager Ansible Versions With pyenv :: Maksym Postument</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="First article in series about ansible. In this article, i will show install pyenv, create virtualenv and install the required ansible version"><meta name=keywords content="VSCode,Devops,Ansible,pyenv,RedHat,Beginner,virtualenv"><meta name=robots content="noodp"><link rel=canonical href=https://mpostument.com/2022/09/19/manager-ansible-versions-with-tfenv/><script async src="https://www.googletagmanager.com/gtag/js?id=G-SBRJXS94DC"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SBRJXS94DC",{anonymize_ip:!1})}</script><link rel=stylesheet href=https://mpostument.com/assets/style.css><link rel=stylesheet href=https://mpostument.com/assets/blue.css><link rel=apple-touch-icon href=https://mpostument.com/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://mpostument.com/img/favicon/blue.png><meta name=twitter:card content="summary"><meta name=twitter:site content="mpostument.com"><meta name=twitter:creator content="Maks_Postument"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="og:title" content="Manager Ansible Versions With pyenv"><meta property="og:description" content="First article in series about ansible. In this article, i will show install pyenv, create virtualenv and install the required ansible version"><meta property="og:url" content="https://mpostument.com/2022/09/19/manager-ansible-versions-with-tfenv/"><meta property="og:site_name" content="Maksym Postument"><meta property="og:image" content="https://mpostument.com/ansible/manager-ansible-versions-with-pyenv.jpg"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:section" content="Devops"><meta property="article:section" content="Ansible"><meta property="article:section" content="Beginner"><meta property="article:published_time" content="2022-09-19 10:54:18 +0300 +0300"><p align=center style=background-color:#23b0ff>Sign up for my <a href=https://tinyletter.com/mpostument>email newsletter</a> or use this <a href=/index.xml>RSS feed</a> to get notified of new blog posts.</p></head><body class=blue><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>mpostument.com</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/>Home</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li><li><a href=/projects/>Projects</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>English ▾</li></ul><ul class="language-selector__more hidden"><li><a href=https://mpostument.com/>English</a></li><li><a href=https://mpostument.com/ua/>Ukraine</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/>Home</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li><li><a href=/projects/>Projects</a></li><hr><li><a href=https://mpostument.com/>English</a></li><li><a href=https://mpostument.com/ua/>Ukraine</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://mpostument.com/2022/09/19/manager-ansible-versions-with-tfenv/>Manager Ansible Versions With pyenv</a></h1><div class=post-meta><span class=post-date>2022-09-19</span>
<span class=post-author>:: Maksym Postument</span>
<span class=post-reading-time>:: 4 min read (643 words)</span></div><span class=post-tags>#<a href=https://mpostument.com/tags/vscode/>VSCode</a>&nbsp;
#<a href=https://mpostument.com/tags/devops/>Devops</a>&nbsp;
#<a href=https://mpostument.com/tags/ansible/>Ansible</a>&nbsp;
#<a href=https://mpostument.com/tags/pyenv/>pyenv</a>&nbsp;
#<a href=https://mpostument.com/tags/redhat/>RedHat</a>&nbsp;
#<a href=https://mpostument.com/tags/beginner/>Beginner</a>&nbsp;</span>
<img src=https://mpostument.com/ansible/manager-ansible-versions-with-pyenv.jpg class=post-cover alt="Manager Ansible Versions With pyenv" title="Cover Image"><div class=post-content><div><p>Hello!</p><p>This is the first post in the series about Ansible, in which I will show how you can manage versions of Ansible and Python using pyenv.</p><h2 id=pyenv>Pyenv<a href=#pyenv class=hanchor arialabel=Anchor>&#8983;</a></h2><p><a href=https://github.com/pyenv/pyenv>pyenv</a> allows you to install different versions of python and also create a virtual env in which ansible will be installed.</p><p>To install pyenv, you need to execute the command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone https://github.com/pyenv/pyenv.git ~/.pyenv
</span></span></code></pre></div><p>and add pyenv to PATH</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>echo <span style=color:#e6db74>&#39;export PYENV_ROOT=&#34;$HOME/.pyenv&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;command -v pyenv &gt;/dev/null || export PATH=&#34;$PYENV_ROOT/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#39;eval &#34;$(pyenv init -)&#34;&#39;</span> &gt;&gt; ~/.bashrc
</span></span></code></pre></div><p>After the shell is restarted, the <code>pyenv</code> command will be available. But to create a virtualenv, you need an additional <a href=https://github.com/pyenv/pyenv-virtualenv>plugin</a> that can be installed using the command:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>git clone https://github.com/pyenv/pyenv-virtualenv.git <span style=color:#66d9ef>$(</span>pyenv root<span style=color:#66d9ef>)</span>/plugins/pyenv-virtualenv
</span></span></code></pre></div><p>You also need to install certain <a href=https://github.com/pyenv/pyenv/wiki#suggested-build-environment>packages</a> for python to compile. For ubuntu it will be:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt-get update; sudo apt-get install make build-essential libssl-dev zlib1g-dev <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>libncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev
</span></span></code></pre></div><p>Now that everything is ready, you can install the required version of python and ansible. Before ansible 2.5 there was support only for python 2, from a version higher than 2.5 you can use python 3. I will install python 3 and ansible version 2.10.</p><h2 id=install-python>Install python<a href=#install-python class=hanchor arialabel=Anchor>&#8983;</a></h2><p>To view available versions of python, you can execute the <code>pyenv install --list</code> command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ pyenv install --list
</span></span><span style=display:flex><span>Available versions:
</span></span><span style=display:flex><span>  2.1.3
</span></span><span style=display:flex><span>  2.2.3
</span></span><span style=display:flex><span>  2.3.7
</span></span><span style=display:flex><span>  2.4.0
</span></span><span style=display:flex><span>  2.4.1
</span></span><span style=display:flex><span>  2.4.2
</span></span><span style=display:flex><span>  2.4.3
</span></span><span style=display:flex><span>  2.4.4
</span></span><span style=display:flex><span>  2.4.5
</span></span><span style=display:flex><span>  2.4.6
</span></span><span style=display:flex><span>  2.5.0
</span></span><span style=display:flex><span>  2.5.1
</span></span><span style=display:flex><span>  2.5.2
</span></span><span style=display:flex><span>  2.5.3
</span></span><span style=display:flex><span>  2.5.4
</span></span><span style=display:flex><span>  2.5.5
</span></span><span style=display:flex><span>  2.5.6
</span></span><span style=display:flex><span>  ...
</span></span></code></pre></div><p>After the desired python version is selected, it can be installed using <code>pyenv install PYTHON_VERSION</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ pyenv install 3.10.7
</span></span><span style=display:flex><span>Downloading Python-3.10.7.tar.xz...
</span></span><span style=display:flex><span>-&gt; https://www.python.org/ftp/python/3.10.7/Python-3.10.7.tar.xz
</span></span><span style=display:flex><span>Installing Python-3.10.7...
</span></span><span style=display:flex><span>Installed Python-3.10.7 to /home/maksym/.pyenv/versions/3.10.7
</span></span></code></pre></div><p>Ansible can be installed now, but if several versions are required, it will be difficult to do so. Since the versions will overwrite each other. It is better to use virtualenv. It can be created using <code>pyenv virtualenv PYTHON_VERSION VIRTUALENV_NAME</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pyenv virtualenv 3.10.7 ansible-2.10
</span></span></code></pre></div><p>When a virtualenv is created it needs to be activated, and this is how you can have multiple versions of ansible installed, with a separate virtualenv for each ansible version.</p><p>You can activate virtualenv using the <code>pyenv activate VIRTUALENV_NAME</code> command</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pyenv activate ansible-2.10
</span></span></code></pre></div><p>Now you are ready to install ansible. This can be done using the <code>pip install PACKAGE_NAME</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ pip install ansible<span style=color:#f92672>==</span>2.10.7
</span></span><span style=display:flex><span>Collecting ansible<span style=color:#f92672>==</span>2.10.7
</span></span><span style=display:flex><span>  Downloading ansible-2.10.7.tar.gz <span style=color:#f92672>(</span>29.9 MB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 29.9/29.9 MB 8.3 MB/s eta 0:00:00
</span></span><span style=display:flex><span>  Preparing metadata <span style=color:#f92672>(</span>setup.py<span style=color:#f92672>)</span> ... <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>Collecting ansible-base&lt;2.11,&gt;<span style=color:#f92672>=</span>2.10.5
</span></span><span style=display:flex><span>  Downloading ansible-base-2.10.17.tar.gz <span style=color:#f92672>(</span>6.1 MB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.1/6.1 MB 9.5 MB/s eta 0:00:00
</span></span><span style=display:flex><span>  Preparing metadata <span style=color:#f92672>(</span>setup.py<span style=color:#f92672>)</span> ... <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>Collecting jinja2
</span></span><span style=display:flex><span>  Using cached Jinja2-3.1.2-py3-none-any.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>133</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Collecting PyYAML
</span></span><span style=display:flex><span>  Downloading PyYAML-6.0-cp310-cp310-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_12_x86_64.manylinux2010_x86_64.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>682</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 682.2/682.2 kB 8.6 MB/s eta 0:00:00
</span></span><span style=display:flex><span>Collecting cryptography
</span></span><span style=display:flex><span>  Downloading cryptography-38.0.1-cp36-abi3-manylinux_2_28_x86_64.whl <span style=color:#f92672>(</span>4.2 MB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.2/4.2 MB 9.9 MB/s eta 0:00:00
</span></span><span style=display:flex><span>Collecting packaging
</span></span><span style=display:flex><span>  Downloading packaging-21.3-py3-none-any.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>40</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 40.8/40.8 kB 3.0 MB/s eta 0:00:00
</span></span><span style=display:flex><span>Collecting cffi&gt;<span style=color:#f92672>=</span>1.12
</span></span><span style=display:flex><span>  Downloading cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>441</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 441.8/441.8 kB 8.9 MB/s eta 0:00:00
</span></span><span style=display:flex><span>Collecting MarkupSafe&gt;<span style=color:#f92672>=</span>2.0
</span></span><span style=display:flex><span>  Downloading MarkupSafe-2.1.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>25</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Collecting pyparsing!<span style=color:#f92672>=</span>3.0.5,&gt;<span style=color:#f92672>=</span>2.0.2
</span></span><span style=display:flex><span>  Downloading pyparsing-3.0.9-py3-none-any.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>98</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 98.3/98.3 kB 6.2 MB/s eta 0:00:00
</span></span><span style=display:flex><span>Collecting pycparser
</span></span><span style=display:flex><span>  Using cached pycparser-2.21-py2.py3-none-any.whl <span style=color:#f92672>(</span><span style=color:#ae81ff>118</span> kB<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Using legacy <span style=color:#e6db74>&#39;setup.py install&#39;</span> <span style=color:#66d9ef>for</span> ansible, since package <span style=color:#e6db74>&#39;wheel&#39;</span> is not installed.
</span></span><span style=display:flex><span>Using legacy <span style=color:#e6db74>&#39;setup.py install&#39;</span> <span style=color:#66d9ef>for</span> ansible-base, since package <span style=color:#e6db74>&#39;wheel&#39;</span> is not installed.
</span></span><span style=display:flex><span>Installing collected packages: PyYAML, pyparsing, pycparser, MarkupSafe, packaging, jinja2, cffi, cryptography, ansible-base, ansible
</span></span><span style=display:flex><span>  Running setup.py install <span style=color:#66d9ef>for</span> ansible-base ... <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>  Running setup.py install <span style=color:#66d9ef>for</span> ansible ... <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>Successfully installed MarkupSafe-2.1.1 PyYAML-6.0 ansible-2.10.7 ansible-base-2.10.17 cffi-1.15.1 cryptography-38.0.1 jinja2-3.1.2 packaging-21.3 pycparser-2.21 pyparsing-3.0.9
</span></span></code></pre></div><p>Ansible is now ready to use</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ ansible --version
</span></span><span style=display:flex><span>ansible 2.10.17
</span></span><span style=display:flex><span>  config file <span style=color:#f92672>=</span> None
</span></span><span style=display:flex><span>  configured module search path <span style=color:#f92672>=</span> <span style=color:#f92672>[</span><span style=color:#e6db74>&#39;/home/maksym/.ansible/plugins/modules&#39;</span>, <span style=color:#e6db74>&#39;/usr/share/ansible/plugins/modules&#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  ansible python module location <span style=color:#f92672>=</span> /home/maksym/.pyenv/versions/3.10.7/envs/ansible-2.10/lib/python3.10/site-packages/ansible
</span></span><span style=display:flex><span>  executable location <span style=color:#f92672>=</span> /home/maksym/.pyenv/versions/ansible-2.10/bin/ansible
</span></span><span style=display:flex><span>  python version <span style=color:#f92672>=</span> 3.10.7 <span style=color:#f92672>(</span>main, Sep <span style=color:#ae81ff>19</span> 2022, 11:11:49<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>GCC 9.4.0<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>If you need to install another version of ansible, you can deactivate virtualenv, create a new one and install ansible</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ pyenv deactivate
</span></span><span style=display:flex><span>$ pyenv virtualenv 3.10.7 ansible-2.9
</span></span><span style=display:flex><span>$ pip install ansible<span style=color:#f92672>==</span>2.9.27
</span></span></code></pre></div><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/pBobhqJrKZg style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://mpostument.com/2022/09/14/terraform-modules-and-import/><span class=button__text>Terraform Modules and Import</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//mpostument-com.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://mpostument.com/assets/main.js></script>
<script src=https://mpostument.com/assets/prism.js></script>
<script src=https://mpostument.com/assets/languageSelector.js></script></div></body></html>