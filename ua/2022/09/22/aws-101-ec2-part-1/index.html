<!doctype html><html lang=ua><head><title>AWS 101: EC2 Part 1 :: Maksym Postument</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Do you want to know more about AWS EC2? Check this post and i will explain all you need to know about AWS"><meta name=keywords content="VSCode,Devops,Beginner,EC2,AWS,Cloud,SRE"><meta name=robots content="noodp"><link rel=canonical href=https://mpostument.com/ua/2022/09/22/aws-101-ec2-part-1/><script async src="https://www.googletagmanager.com/gtag/js?id=G-SBRJXS94DC"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-SBRJXS94DC",{anonymize_ip:!1})}</script><link rel=stylesheet href=https://mpostument.com/assets/style.css><link rel=stylesheet href=https://mpostument.com/assets/blue.css><link rel=apple-touch-icon href=https://mpostument.com/img/apple-touch-icon-192x192.png><link rel="shortcut icon" href=https://mpostument.com/img/favicon/blue.png><meta name=twitter:card content="summary"><meta name=twitter:site content="mpostument.com"><meta name=twitter:creator content="Maks_Postument"><meta property="og:locale" content="ua"><meta property="og:type" content="article"><meta property="og:title" content="AWS 101: EC2 Part 1"><meta property="og:description" content="Do you want to know more about AWS EC2? Check this post and i will explain all you need to know about AWS"><meta property="og:url" content="https://mpostument.com/ua/2022/09/22/aws-101-ec2-part-1/"><meta property="og:site_name" content="Maksym Postument"><meta property="og:image" content="https://mpostument.com/aws/aws-101-ec2-part-1.jpg"><meta property="og:image:width" content="2048"><meta property="og:image:height" content="1024"><meta property="article:section" content="Devops"><meta property="article:section" content="Beginner"><meta property="article:section" content="AWS"><meta property="article:published_time" content="2022-09-22 22:45:30 +0300 +0300"><p align=center style=background-color:#23b0ff>Sign up for my <a href=https://tinyletter.com/mpostument>email
newsletter</a> or use this <a href=/index.xml>RSS feed</a> to get notified of new blog posts.</p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8633398301520801" crossorigin=anonymous></script></head><body class=blue><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/ua><div class=logo>mpostument.com</div></a></div><div class=menu-trigger>menu</div></div><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/ua>Home</a></li><li><a href=/ua/categories/>Categories</a></li><li><a href=/ua/tags/>Tags</a></li><div class=spacer></div><ul class=language-selector><ul class=language-selector-current><li>Ukraine ▾</li></ul><ul class="language-selector__more hidden"><li><a href=https://mpostument.com/>English</a></li><li><a href=https://mpostument.com/ua/>Ukraine</a></li></ul></ul></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/ua>Home</a></li><li><a href=/ua/categories/>Categories</a></li><li><a href=/ua/tags/>Tags</a></li><hr><li><a href=https://mpostument.com/>English</a></li><li><a href=https://mpostument.com/ua/>Ukraine</a></li></ul></nav></header><div class=content><div class=post><h1 class=post-title><a href=https://mpostument.com/ua/2022/09/22/aws-101-ec2-part-1/>AWS 101: EC2 Part 1</a></h1><div class=post-meta><span class=post-date>2022-09-22</span>
<span class=post-author>:: Maksym Postument</span>
<span class=post-reading-time>:: 8 min read (1571 words)</span></div><span class=post-tags>#<a href=https://mpostument.com/ua/tags/devops/>Devops</a>&nbsp;
#<a href=https://mpostument.com/ua/tags/ec2/>EC2</a>&nbsp;
#<a href=https://mpostument.com/ua/tags/beginner/>Beginner</a>&nbsp;
#<a href=https://mpostument.com/ua/tags/aws/>AWS</a>&nbsp;</span>
<img src=https://mpostument.com/aws/aws-101-ec2-part-1.jpg class=post-cover alt="AWS 101: EC2 Part 1" title="Cover Image"><div class=post-content><div><p>Привіт!</p><p>Цим посту розпочну серію про AWS, в яких покажу як використовувати різні AWS сервіси, автоматизовувати за допомогою <code>terraform</code> та AWS SDK. І розпочнемо з сервісу EC2.</p><p>EC2 є основним обчислювальним компонентом AWS. На практиці EC2 полегшує життя розробникам, надаючи безпечну обчислювальну потужність у AWS зі змінним розміром. Він значно полегшує процес збільшення або зменшення масштабу, може бути інтегрований у кілька інших служб і поставляється з планом, згідно з яким ви платите лише за те, скільки використовуєте.</p><h2 id=ui-overview>UI Overview<a href=#ui-overview class=hanchor arialabel=Anchor>&#8983;</a></h2><p><img src=/aws/ec2/ec2-ui.png alt=ec2-ui></p><p>Так виглядає EC2 UI. В ньому є декілька категорій:</p><ul><li>Instance</li><li>Images</li><li>EBS</li><li>Network & Security</li><li>Load Balancing</li><li>Auto Scaling</li></ul><h3 id=instance>Instance<a href=#instance class=hanchor arialabel=Anchor>&#8983;</a></h3><p>В секції instance можна створювати сервери, переглядати існуючі, і створювати шаблони конфігурацій серверів для подальшого перевикористання. Для того щоб створити сервер потрібно натиснути Launch Instance.</p><p><img src=/aws/ec2/ec2-launch.png alt=ec2-launch></p><p>Де потрібно вказати атрибути майбутнього ec2. З обов&rsquo;язкового потрібно вказати AMI. AMI це образ операційної системі яка буде використовуватись для EC2. Це може бути як чиста OS без додаткових налаштувань, або ж образ з певними налаштуваннями, наприклад з LAMP Stack чи Wordpress.</p><p><img src=/aws/ec2/ec2ami.png alt=ec2-ami></p><p>Наступними обов&rsquo;язковими параметрами є Instance Type та Key Pair.
Тип сервера визначає скільки в нього буде оперативної пам&rsquo;яті та ядер процесора. В залежності від типу сервера буде визначатись ціна.</p><p>Різні типи серверів мають різні призначення:</p><ol><li>Загального призначення - балансують обчислювальні, мережеві ресурси та пам&rsquo;ять. Їх можна використовувати для багатьох різних робочих навантажень. Ці сервери ідеально підходять для програм, які використовують такі ресурси в однакових обсягах, наприклад, веб-серверів та репозиторіїв коду. Типи T та M</li><li>Оптимізовані для обчислень - ідеально підходять для додатків з обмеженнями швидкості обчислень, які можуть використовувати високопродуктивні процесори. Сервери, що належать до цього сімейства, добре підходять для робочих навантажень з пакетною обробкою, перекодування мультимедіа, високопродуктивних веб-серверів, високопродуктивних обчислень (HPC), наукового моделювання, виділених ігрових та рекламних серверів, висновків машинного навчання та інших додатків, що потребують великих обчислювальних ресурсів. Тип C</li><li>Оптимізовані для пам&rsquo;яті - забезпечують високу продуктивність робочих навантажень, пов&rsquo;язаних з обробкою великих наборів даних у пам&rsquo;яті. Тип R</li><li>Прискорених обчислень - використовують апаратні прискорювачі (співпроцесори) для таких операцій, як обчислення з плаваючою комою, обробка графіки та зіставлення зразків даних, і в результаті виконують їх ефективніше, ніж це можливо при роботі програмного забезпечення лише на ЦПУ. Типи P, G, F</li><li>Оптимізовані для зберігання - оптимізовані для зберігання, підходять для робочих навантажень, що потребують послідовного доступу для численних операцій читання та запису до пакетів великих даних у локальному сховищі. Вони оптимізовані для доставки десятків тисяч випадкових операцій введення/виводу за секунду з низькою затримкою (IOPS) додатків. Типи I, D</li></ol><p><img src=/aws/ec2/ec2-instance-type.png alt=ec2-type></p><p>Key Type вказує який ssh ключ буде використовуватись для доступу до сервера, або ж не використовувати ключ взагалі. В такому випадку ssh доступу до сервера не буде.</p><p><img src=/aws/ec2/ec2-network.png alt=ec2-network></p><p>В цій секції вказується в якому subnet створювати сервер та яку security group використовувати. Security Group являє собою firewall який керує які порти будуть відкриті на сервері</p><p><img src=/aws/ec2/ec2-volume.png alt=ec2-volume></p><p>В цій секції налаштовується розмір та тип диску для сервера, а також можна підключити файлову систему як EFS чи FSx.</p><p>Також важливою категорією є теги, варто завжди додавати хоча б декілька для того щоб в майбутньому можна було дізнатись чий цей сервер, до якого середовища він належить, його призначення і тд. Теги це значення ключ значення, наприклад Name = WebServer.</p><p>Остання секція це Advanced details. Де можна вказати багато інших параметрів найважливіші з яких це IAM instance profile (визначає доступ до яких AWS ресурсів буде з цього сервера), та User Data (Скрипт який виконується при створенні сервера).</p><p>Після того як всі параметри вказані потрібно натиснути Launch Instance і сервер буде створено.</p><h3 id=instance-type>Instance Type<a href=#instance-type class=hanchor arialabel=Anchor>&#8983;</a></h3><p>В цій секції можна переглянути існуючі типи серверів та ціни на них.</p><p><img src=/aws/ec2/ec2-types.png alt=ec-types></p><h3 id=launch-template>Launch Template<a href=#launch-template class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Launch template має майже всі ті ж самі поля що і при створенні сервера. Але створення Launch Template не створює сервер, а створює тільки шаблон який можна використати для створення серверів з однаковою конфігурацією. Окрім стандартних параметрів EC2 потрібно вказати назву шаблона.</p><p><img src=/aws/ec2/ec2-launch-tpl.png alt=ec2-launch-tpl></p><p>І як тільки шаблон створено з нього можна створити сервер, також його можна використати в auto scaling group.</p><p><img src=/aws/ec2/ec2-tpl-launch.png alt=ec2-tpl-launch></p><h3 id=spot-requests>Spot Requests<a href=#spot-requests class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Spot-сервери - це по суті продаж вільних зараз ресурсів з відмінною знижкою. При цьому сервер можуть у будь-який момент вимкнути та забрати назад. Під час замовлення ви робите ставку (bid) - вказуєте максимальну ціну, яку ви готові платити за використання. Саме баланс ставок та вільних ресурсів формує підсумкову вартість, яка при цьому відрізняється у різних регіонах.</p><h3 id=savings-plan>Savings Plan<a href=#savings-plan class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Дозволяє отримати знижку на ec2/lambda/fargate за зобов&rsquo;язання використовувати певну кількість ресурсів протягом 1 чи 3 років.</p><h3 id=reserved-instances>Reserved instances<a href=#reserved-instances class=hanchor arialabel=Anchor>&#8983;</a></h3><p>По факту схоже на Savings Plan тільки з тією відмінністю що reserved instance купується на якийсь конкретний тип сервера на 1 чи 3 роки</p><p><img src=/aws/ec2/ec2-reserved.png alt=ec2-reserved></p><h3 id=images>Images<a href=#images class=hanchor arialabel=Anchor>&#8983;</a></h3><p>В images є AMI Catalog де можна знайти всі публічно доступні ami. А також AMIs. В секції AMIs знаходяться всі наші створенні AMI. AMI можна створити натиснувши правою кнопкою миші на сервері, в меню що з&rsquo;явилось обрати Image and Templates -> Create Image.</p><p><img src=/aws/ec2/ec2-create-ami.png alt=ec2-create-ami></p><p>Як уся інформація введена потрібно натиснути Create Image і створену AMI можна знайдено в розділі AMIs</p><p><img src=/aws/ec2/ec2-ami-ready.png alt=ec2-ami-reade></p><p>Тепер з цієї AMI можна створювати нові сервери</p><h3 id=elastic-block-store>Elastic Block Store<a href=#elastic-block-store class=hanchor arialabel=Anchor>&#8983;</a></h3><p>В цьому розділі зберігається усе що стосується дисків.</p><h4 id=volumes>Volumes<a href=#volumes class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Тут знаходяться диски які зараз використовуються сервером або ж які тимчасово нічим не використовуються</p><p><img src=/aws/ec2/ec2-volume-ready.png alt=ec2-volume-ready></p><h4 id=snapshots>Snapshots<a href=#snapshots class=hanchor arialabel=Anchor>&#8983;</a></h4><p>В цьому розділі знаходяться знімки диска в певний момент часу. За допомогою них можна створити новий volume якщо потрібно відновити дані які були втрачено на самому диску. Зауважте що коли ми створили AMI автоматично створився знімок диску. І його неможливо буде видалити доки існує AMI. Спочатку потрібно видалити ami і тільки тоді можна буде видалити знімок</p><p><img src=/aws/ec2/ec2-snapshot.png alt=ec2-snapshot></p><h4 id=lifecycle-manager>Lifecycle Manager<a href=#lifecycle-manager class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Дозволяє створювати правила за якими автоматично будуть створюватись знімки дисків/ami і видалятись.</p><p>На першій сторінці конфігурації потрібно вказати назву полісі і також вибрати AIM роль за допомогою якою створення/видалення буде відбуватись. І також вказати для яких серверів це буде відбуватись. Це вказується за допомогою тегів. Наприклад якщо в мене є тег type = database то я можу вказати що тільки для серверів з ним робити знімки або ж AMI.</p><p>На наступній сторінці вказується графік за яким полісі буде працювати і скільки зберігати знімків. Наприклад запускати кожен день в 12-00 UTC і зберігати 20 останніх.</p><h3 id=network--security>Network & Security<a href=#network--security class=hanchor arialabel=Anchor>&#8983;</a></h3><p>В цьому розділі знаходяться security groups які керують налаштуванням доступів до портів на сервері. SSH ключі для доступу до статичні IP адреси.</p><h4 id=security-groups>Security Groups<a href=#security-groups class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Security Group дозволяють відкрити певні порти для доступу до сервера. Наприклад можна відкрити порт 443 для https доступу на сервер, або ж порт 22 для доступу по ssh.</p><p><img src=/aws/ec2/ec2-sg.png alt=ec2-sg></p><p>Правила є двох типі Inbound та Outbound якими контролюється вхідний трафік та вихідний. В даному прикладі в вхідному трафіку буде одне правило як дозволяє доступ по 22 порту з певного ip адресу. Вихідний трафік доступний весь. Без будь яких обмежень.</p><p>Security group можна обрати при створенні сервера, або ж натиснути правою кнопкою миші на сервері і там обрати Security > Change security groups. Вибрати/видалити потрібну групу і натиснути Save.</p><h4 id=elastic-ips>Elastic IPs<a href=#elastic-ips class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Change security groups
Дозволяє зарезервувати статичний публічний ip адрес. Якщо сервер в AWS видаляється чи зупиняється то його ip адрес змінюється. Якщо нам потрібно щоб він завжди був однаковий це можна зробити цьому розділі.
Достатньо натиснути Allocate Elastic IP Address</p><p><img src=/aws/ec2/ec2-elastic.png alt=ec2-elastic></p><p>Тепер потрібно вказати серверу щоб використовував цей адрес. Для цього потрібно його виділити і в меню натиснути Actions -> Associate Elastic IP address. Вибрати сервер ти його приватну IP і натиснути Associate.</p><p><img src=/aws/ec2/ec2-eip-associate.png alt=ec2-eip-associate></p><p>Якщо ж IP більше не потрібен то його можна видалити натиснувши Actions -> Release Elastic IP address і підтвердити видалення.</p><h3 id=placement-groups>Placement groups<a href=#placement-groups class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Коли ви запускаєте новий сервер, AWS намагається розмістити його таким чином, щоб усі сервери були розподілені на одному обладнанні, щоб мінімізувати корельовані збої</p><h4 id=key-pairs>Key Pairs<a href=#key-pairs class=hanchor arialabel=Anchor>&#8983;</a></h4><p>В Key Pairs зберігаються публічні частини SSH ключів. Їх можна обрати при створенні сервера</p><h4 id=network-interfaces>Network interfaces<a href=#network-interfaces class=hanchor arialabel=Anchor>&#8983;</a></h4><p>Тут знаходяться мережеві інтерфейси усіх AWS сервісів.</p><p><img src=/aws/ec2/ec2-eni.png alt=ec2-eni></p><h3 id=load-balancer-та-autoscaling-будуть-розглянуті-в-наступному-пості>Load Balancer та Autoscaling будуть розглянуті в наступному пості<a href=#load-balancer-та-autoscaling-будуть-розглянуті-в-наступному-пості class=hanchor arialabel=Anchor>&#8983;</a></h3><h2 id=how-to-create-ec2-with-terraform>How to create ec2 with terraform<a href=#how-to-create-ec2-with-terraform class=hanchor arialabel=Anchor>&#8983;</a></h2><p>За допомогою terraform дуже просто створити сервер. Для цього в terraform є ресурс який називається <a href=https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/instance>aws_instance</a>.</p><p>Найпростіший приклад коду буде виглядати ось так</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;aws_instance&#34;</span> <span style=color:#e6db74>&#34;foo&#34;</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ami</span>                    = <span style=color:#e6db74>&#34;ami-0cff7528ff583bf9a&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>instance_type</span>          = <span style=color:#e6db74>&#34;t2.micro&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>subnet_id</span>              = <span style=color:#e6db74>&#34;subnet-db73f0ac&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>vpc_security_group_ids</span> = [<span style=color:#e6db74>&#34;sg-b04b8cd4&#34;</span>]
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>tags</span> = {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Env</span> = <span style=color:#e6db74>&#34;Dev222&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>volume_tags</span> = {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;Env&#34;</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Dev&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>В цьому прикладі викликається terraform ресурс aws_instance в який передаємо набір параметрів, тих ж самих які ми передавали коли створювали сервер через UI.</p><p>Якщо хочеш дізнатись більше про terraform і його застосування рекомендую почитати <a href=https://mpostument.com/ua/2022/07/26/terraform-install/ title="серію постів про terraform">серію постів про terraform</a></p><h2 id=golang-sdk>Golang SDK<a href=#golang-sdk class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Іншим варіантом як створити сервер є AWS SDK, а конкретніше <a href=https://aws.github.io/aws-sdk-go-v2/docs/getting-started/>Golang AWS SDK</a>. Щоб його використати <a href=https://go.dev/doc/install>golang має бути встановлено</a> разом з <a href=https://aws.github.io/aws-sdk-go-v2/docs/getting-started/#install-the-aws-sdk-for-go-v2>AWS SDK</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;context&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/aws&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/config&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/service/ec2&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/service/ec2/types&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// Load the Shared AWS Configuration (~/.aws/config)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>cfg</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>LoadDefaultConfig</span>(<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>TODO</span>(),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>WithSharedConfigProfile</span>(<span style=color:#e6db74>&#34;default&#34;</span>))
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>client</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ec2</span>.<span style=color:#a6e22e>NewFromConfig</span>(<span style=color:#a6e22e>cfg</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>input</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>ec2</span>.<span style=color:#a6e22e>RunInstancesInput</span>{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ImageId</span>:      <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;ami-0cff7528ff583bf9a&#34;</span>),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>InstanceType</span>: <span style=color:#a6e22e>types</span>.<span style=color:#a6e22e>InstanceTypeT2Micro</span>,
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>SubnetId</span>:     <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;subnet-db73f0ac&#34;</span>),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>SecurityGroupIds</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>ToStringSlice</span>([]<span style=color:#f92672>*</span><span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;sg-b04b8cd4&#34;</span>),
</span></span><span style=display:flex><span>		}),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>MaxCount</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>Int32</span>(<span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>MinCount</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>Int32</span>(<span style=color:#ae81ff>1</span>),
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>RunInstances</span>(<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Background</span>(), <span style=color:#a6e22e>input</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>В коді відбувається декілька подій. Перше створюємо AWS client в якому вказую що хочу використовувати профіль з назвою default. Сам профіль знаходиться в теці ~/.aws/credentials. Тут мають бути зазначені AWS Access Key та Secret Key які можна <a href=https://aws.amazon.com/premiumsupport/knowledge-center/create-access-key/>згенерувати</a> для свого користувача в AWS UI.</p><p>В <code>RunInstancesInput</code> вказуємо параметри з якими створимо сервер. Тут все те ж саме що і при створенні з UI що при використанні terraform. І створюємо сервер з цими параметрами. Перевагою terraform над цим способом є те що все що створив terraform можна видалити за допомогою <code>terraform destroy</code>. В цьому ж випадку прийдеться створити свою логіку як буде відбуватись видалення або ж видалити з UI.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe src=https://www.youtube.com/embed/-nJwDYvtgEs style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button next"><a href=https://mpostument.com/ua/2022/09/19/manage-ansible-versions-with-pyenv/><span class=button__text>Manage Ansible Versions With pyenv</span>
<span class=button__icon>→</span></a></span></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//mpostument-com.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2022 Powered by <a href=http://gohugo.io>Hugo</a></span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span></div></div></footer><script src=https://mpostument.com/assets/main.js></script>
<script src=https://mpostument.com/assets/prism.js></script>
<script src=https://mpostument.com/assets/languageSelector.js></script></div></body></html>